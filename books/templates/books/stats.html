{% extends "books/header.html" %}

{% block content %}

<div class="banner stats-color">Statistics</div>
{% include "books/top_menu.html" %}

<div class="stats-book-grid" style="width: 100%; margin-top: 35px; margin-left: 10px;">
    {% for book in currently_reading_books %}
    <a class="stats-book-grid-book" href="{% url 'books:book_detail' book.id %}">
        {{book.title}}
    </a>
    <a class="modify-condensed" href="{% url 'books:modify_book' book.id %}">Update</a>

    <div class="progress bg-secondary" style="width: 100%; height: 50px; font-size: 30px; grid-column: span 2;">
        <div class="progress-bar" role="progressbar" style="width: {{book.percent_read}}%;" aria-valuenow="100"
             aria-valuemin="0" aria-valuemax="200">{{book.pages_read}} / {{book.pages}} pages read</div>
    </div>
    {% endfor %}

    <div class="progress bg-secondary" style="width: 100%; height: 50px; font-size: 30px; grid-column: span 2;">
        <div class="progress-bar" role="progressbar" style="width: {{state.book_percent_read}}%;"
             aria-valuenow="100" aria-valuemin="0" aria-valuemax="200">
            {{state.books_read|floatformat:1}} / {{state.expected_books_so_far|floatformat:1}} books read</div>
        {% if state.book_superavit_percent > 0 %}
        <div class="progress-bar bg-success" role="progressbar" style="width: {{state.book_superavit_percent}}%" aria-valuenow="30"
             aria-valuemin="0" aria-valuemax="100">{{state.book_superavit_percent|floatformat:1}}%</div>
        {% else %}
        <div class="progress-bar bg-danger" role="progressbar" style="width: {{state.book_deficit_percent}}%" aria-valuenow="30"
             aria-valuemin="0" aria-valuemax="100">-{{state.book_deficit_percent|floatformat:1}}%</div>
        {% endif %}
    </div>

    <div class="progress bg-secondary" style="width: 100%; height: 50px; font-size: 30px; grid-column: span 2;">
        {% if pages_per_day.0 > pages_per_day.1 %}
        <div class="progress-bar bg-success" role="progressbar" style="width: {{pages_per_day.2}}%;"
             aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">{{pages_per_day.0|floatformat:1}} ppd</div>
        <div class="progress-bar bg-secondary" role="progressbar" style="width: {{pages_per_day.3}}%" aria-valuenow="30"
             aria-valuemin="0" aria-valuemax="100">{{pages_per_day.1|floatformat:1}} ppd</div>
        {% else %}
        <div class="progress-bar bg-secondary" role="progressbar" style="width: {{pages_per_day.2}}%;"
             aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">{{pages_per_day.0|floatformat:1}} ppd</div>
        <div class="progress-bar bg-danger" role="progressbar" style="width: {{pages_per_day.3}}%" aria-valuenow="30"
             aria-valuemin="0" aria-valuemax="100">{{pages_per_day.1|floatformat:1}} ppd</div>
        {% endif %}
    </div>
</div>


<div class="three-col-grid" style="width: 800px; margin-top: 50px;">
    <div class="three-col-grid-text">Pages read:</div>
    <div class="three-col-grid-number">{{state.pages_read}}</div>
    <div></div>

    <div class="three-col-grid-text">Pages per book:</div>
    <div class="three-col-grid-number">{{state.pages_per_book|floatformat:1}}</div>
    <div></div>

    <div><br></div>
    <div></div>
    <div></div>


    <div class="three-col-grid-text">Books to read:</div>
    <div class="three-col-grid-number">{{state.required_books|floatformat:1}}</div>
    <div></div>
</div>

{% endblock %}
