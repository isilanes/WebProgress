{% extends "books/header.html" %}

{% block content %}

<div class="banner">Book detail: {{book}}</div>
{% include "books/top_menu.html" %}

<head>
    {{ progress_plot_script | safe }}
    {{ rate_plot_script | safe }}
</head>

<br><br>

<table class="normal">
    <tr>
        <th>Title:</th>
        <td>{{ book.title }}</td>
    </tr>
    <tr>
        <th>Author:</th>
        <td>
            {% for author in book.authors.all %}
            <a href="{% url 'books:author_detail' author.id %}">{{ author }}</a>{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </td>
    </tr>
    <tr>
        <th>Pages:</th>
        <td>{{ book.pages }}</td>
    </tr>
    <tr>
        <th>Published:</th>
        <td style="padding: 5px 20px;">{{ book.year }}</td>
    </tr>
    {% if book.saga %}
    <tr>
        <th>Saga:</th>
        <td style="padding: 5px 20px;">{{ book.saga }} #{{book.index_in_saga}}</td>
    </tr>
    {% endif %}
</table>

<br>

<form action="{% url 'books:modify_book' book.id %}" method="post">
    {% csrf_token %}
    <button type="submit" class="modify">Modify</button>
</form>

<br>

<table class="normal">
    <tr>
        <th>Date</th>
        <th style="text-align: left">Event</th>
    </tr>
    {% for event in book.events %}
    <tr>
        <td>{{event.when|date:"Y-m-d H:i" }}</td>
        <td style="text-align: left">{{event}}</td>
    </tr>
    {% endfor %}
</table>

{% endblock %}
